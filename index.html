<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!--mobile friendly: -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> 

    <script type="text/javascript" src="//www.parsecdn.com/js/parse-1.4.2.min.js"></script>
    <script type="text/javascript" src="fb.js" ></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">    
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <!-- jQuery library -->

    <link href = "css/styles.css" rel = "stylesheet">
    <title>BKWD Test</title>
        
        
</head>

<body onload='loadcontent()'>
<body>
<div id="fb-root"></div> 

                    <!--FACEBOOK/PARSE INITIALIZATION-->
    <script>
  Parse.initialize("2B1LrySeACHqPEBFWYUnJFjZh76IcWSV6B8apCR3", "D51O9nn4LjfGGq0QTMM775Np3VadMkhSpZxcgNzx");

  /*/initialize parse with facebook utils 
  window.fbAsyncInit = function() {
    Parse.FacebookUtils.init({
      appId      : '955781044444165',
      status     : false, 
      cookie     : true, //allow parse to access session
      xfbml      : true,
      version    : 'v2.3'
    });
    //can run code after SDK is loaded
    Parse.FacebookUtils.logIn( {
        success: function(user) {
        if (!user.existed()) {
          alert("User signed up and logged in through Facebook!");
        } else {
          alert("User logged in through Facebook!");
        }
      },
      error: function(user, error) {
        alert("User cancelled the Facebook login or did not fully authorize.");
      }
   });
  };
  
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));*/
    
  
      // Initialize the Facebook SDK with Parse as described at 
      // https://parse.com/docs/js_guide#fbusers
      window.fbAsyncInit = function() {
        // init the FB JS SDK
        Parse.FacebookUtils.init({
          appId      : '955781044444165', // Facebook App ID
          status     : true, // check login status
          cookie     : true, // enable cookies to allow Parse to access the session
          xfbml      : true  // parse XFBML
          version    : 'v2.3'
        });
        Parse.FacebookUtils.logIn(null, {
          success: function(user) {
            // If it's a new user, let's fetch their name from FB
            if (!user.existed()) {
              // We make a graph request
              FB.api('/me', function(response) {
                if (!response.error) {
                  // We save the data on the Parse user
                  user.set("displayName", response.name);
                  user.save(null, {
                    success: function(user) {
                      // And finally save the new score
                      console.log("hey you're a user");
                    },
                    error: function(user, error) {
                      console.log("Oops, something went wrong saving your name.");
                    }
                  });
                } else {
                  console.log("Oops something went wrong with facebook.");
                }
              });
            // If it's an existing user that was logged in, we save the score
            } else {
              console.log("youre already a user");
            }
          },
      };
      (function(d, debug){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
         ref.parentNode.insertBefore(js, ref);
       }(document, /*debug*/ false));
</script>
                    <!--END FB INIT-->

<div class="container">
 
    <div class="row"> 
        <div class="offset-by-one six columns">
            <h1><img src="images/alikeio_logo.png" width="218" height="60" id="logo"></h1>
        </div>

    </div>
        
    <div>

        <fb:login-button scope="public_profile,email,user_likes" onlogin="checkLoginState();"></fb:login-button>

        <div id="status"></div>

    </div>

        <div class = 'content'>

        </div>

    </div>       
        
</div> 

        
    </div></body>
